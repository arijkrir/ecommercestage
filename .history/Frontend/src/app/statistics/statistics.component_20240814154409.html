<app-navbar></app-navbar>
<div class="statistics-container">
  <div class="stat-card">
    <h3>Les régions actives</h3>
    <div *ngIf="chartData.length > 0" class="chart-container">
      <google-chart 
        [type]="chartType" 
        [data]="chartData" 
        [options]="chartOptions" 
        [width]="340" 
        [height]="300">
      </google-chart>
    </div>
    <p *ngIf="!topCities.length && !errorMessage">Chargement des données...</p>
    <p *ngIf="errorMessage">{{ errorMessage }}</p>
  </div>

  <div class="stat-card">
    <h3>Les clients les plus actifs</h3>
    <p *ngIf="topUsers.length > 0">
      <p-table [value]="topUsers" [paginator]="true" [rows]="5" [responsive]="true">
        <ng-template pTemplate="header">
          <tr>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Ville</th>
            <th>Commandes</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
          <tr>
            <td>{{ user.nom }}</td>
            <td>{{ user.prenom }}</td>
            <td>{{ user.ville }}</td>
            <td>{{ user.commandesCount }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p>
    <p *ngIf="!topUsers.length && !errorMessage">Chargement des données...</p>
    <p *ngIf="errorMessage">{{ errorMessage }}</p>
  </div>

  <div class="stat-card">
    <h3>Produits les plus vendus</h3>
    <p>Top produits les plus vendus</p>
    <!-- Détails dynamiques -->
  </div>
</div>
